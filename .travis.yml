language: csharp  
sudo: required  
dist: trusty  
mono: latest
dotnet: 1.1.5
env:
  global:
  - COMMIT_AUTHOR_EMAIL: "konard@me.com"
before_script:
  - cd Platform
  - dotnet restore Platform.dotnet.sln
  - dotnet build Platform.dotnet.sln
script:
  - cd Platform.Tests
  - rm Platform.Tests.Library.csproj
  - dotnet xunit -parallel none
after_success:
  - cd ../..
  - nuget install docfx.console
  - ls
  - mono docfx.console.2.28.3/tools/docfx.exe docfx.json
  - ls doc/generated/site
  - ls doc/generated/site/doc
  - bash ./deploy.sh
